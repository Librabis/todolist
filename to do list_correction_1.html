<!DOCTYPE html>
<html>

<head>
    <title>Page Title</title>
    <link rel="stylesheet" href="style.css"> </head>

<body>
    <div id="tasksBlock"></div>
    <script>
        //переменные
        let formKeeper = document.getElementById("tasksBlock");
        let checkString
        let createAddString = function () {
            let inputBlock = document.createElement("div")
            inputBlock.classList.add("block")
            formKeeper.append(inputBlock)
            let inputNewTask = document.createElement("input")
            inputNewTask.classList.add("input")
            inputBlock.append(inputNewTask)
            let addButton = document.createElement("div")
            addButton.classList.add("button")
            addButton.addEventListener("click", addTask)
            inputBlock.append(addButton)
            addButton.innerText = "add";
        }
        let correction = function (place, valueTask, buttonName, nearElement) {
            let taskBlock = document.createElement("div")
            taskBlock.classList.add("block")
            
            if (nearElement.tagName == "INPUT") {
                // если место это инпутовский тэг
                place.insertAdjacentElement("beforeBegin", taskBlock)
                let task = document.createElement("div")
                task.classList.add("input")
                task.innerText = valueTask;
                taskBlock.append(task)
                let correctButton = document.createElement("div")
                correctButton.classList.add("button")
                correctButton.addEventListener("click", correctTask)
                correctButton.innerText = buttonName;
                taskBlock.append(correctButton)
                    //console.log("something is working... ")
                if (formKeeper.lastChild != place) {
                    place.remove()
                } // если это не последний элемент в форме, то         place.remove()
            }
            else {
                place.insertAdjacentElement("beforeBegin", taskBlock) // correct
                let task = document.createElement("input")
                task.classList.add("input")
                task.value = valueTask;
                taskBlock.append(task)
                let correctButton = document.createElement("div")
                correctButton.classList.add("button")
                correctButton.addEventListener("click", acceptTask)
                correctButton.innerText = buttonName;
                taskBlock.append(correctButton)
                place.remove()
            }
        }
        let addTask = function (clickElement) {
            checkString = clickElement.target.previousElementSibling
            if (checkString.value) {
                //checkString.style.backgroundColor = "green"
                correction (clickElement.target.parentElement, checkString.value, "correct", checkString);
                checkString.value = "";
            }
        }
        let correctTask = function (clickElement) {
                checkString = clickElement.target.previousElementSibling
                correction (clickElement.target.parentElement, checkString.textContent, "agree", checkString)
                //console.log("Call from function")
            }
        let acceptTask = function(clickElement) {
            checkString = clickElement.target.previousElementSibling
                correction (clickElement.target.parentElement, checkString.value, "correct", checkString)
                //console.log("Call from function")
        }
        createAddString()
    </script>
</body>

</html>